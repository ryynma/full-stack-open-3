(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,n){e.exports=n(43)},41:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),u=n(10),o=n.n(u),s=n(15),i=n(11),l=n(12),c=n(14),m=n(13),f=n(16),d=function(e){var t=e.person,n=e.app;return r.a.createElement("tr",null,r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.number),r.a.createElement("td",null,r.a.createElement("button",{onClick:n.removePersonOf(t.id)},"poista")))},p=function(e){var t=e.onChange;return r.a.createElement("div",null,"Suodata ",r.a.createElement("input",{onChange:t}))},h=function(e){var t=e.message;return null===t?null:r.a.createElement("div",{className:"notification"},t)},v=function(e){var t=e.app;return r.a.createElement("div",null,r.a.createElement("h2",null,"Lis\xe4\xe4 uusi"),r.a.createElement("form",{onSubmit:t.addPerson},r.a.createElement("div",null,"Nimi: ",r.a.createElement("input",{value:t.state.newName,onChange:t.handleChangeName})),r.a.createElement("div",null,"Numero: ",r.a.createElement("input",{value:t.state.newNumber,onChange:t.handleChangeNumber})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"Lis\xe4\xe4"))))},g=n(2),w=n.n(g),E="/api/persons",b={getAll:function(){return w.a.get(E).then(function(e){return e.data})},create:function(e){return w.a.post(E,e).then(function(e){return e.data})},remove:function(e){return w.a.delete("".concat(E,"/").concat(e)).then(function(e){return e.data})},update:function(e){var t=e.id;return w.a.put("".concat(E,"/").concat(t),e).then(function(e){return e.data})}},N=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(c.a)(this,Object(m.a)(t).call(this))).isInList=function(t){return e.state.persons.map(function(e){return e.name.toLowerCase()}).includes(t.toLowerCase())},e.addPerson=function(t){t.preventDefault();var n=e.state.newName.trim(),a=e.state.newNumber.trim();if(e.isInList(n)){if(window.confirm("'".concat(n,"' on jo luettelossa. Korvataanko vanha numero uudella?"))){var r=e.state.persons.filter(function(e){return e.name.toLowerCase().valueOf()===n.toLocaleLowerCase().valueOf()})[0],u=Object(s.a)({},r,{number:a});e.update(u)}}else e.add({name:n,number:a})},e.add=function(t){b.create(t).then(function(t){e.setState({persons:e.state.persons.concat(t),newName:"",newNumber:"",message:"Lis\xe4ttiin ".concat(t.name)}),setTimeout(function(){e.setState({message:null})},4e3)})},e.update=function(t){b.update(t).then(function(t){e.setState({persons:e.state.persons.map(function(e){return e.id===t.id?t:e}),newName:"",newNumber:"",message:"P\xe4ivitettiin ".concat(t.name)}),setTimeout(function(){e.setState({message:null})},4e3)}).catch(function(n){e.setState({persons:e.state.persons.filter(function(e){return e.id!==t.id})}),e.add({name:t.name,number:t.number})})},e.handleChangeName=function(t){var n=t.target.value;e.setState({newName:n})},e.handleChangeNumber=function(t){var n=t.target.value;e.setState({newNumber:n})},e.handleChangeFilter=function(t){var n=t.target.value;e.setState({filter:n})},e.removePersonOf=function(t){return function(){var n=e.state.persons.filter(function(e){return e.id===t}).map(function(e){return e.name});window.confirm("Poistetaanko ".concat(n,"?"))&&b.remove(t).then(function(a){console.log("poistettu henkil\xf6:",a),a?(e.setState({persons:e.state.persons.filter(function(e){return e.id!==t}),message:"Poistettiin ".concat(n)}),setTimeout(function(){e.setState({message:null})},4e3)):(e.setState({message:"Henkil\xf6 oli jo poistettu puhelinluettelosta"}),setTimeout(function(){e.setState({message:null})},4e3),e.setState({persons:e.state.persons.filter(function(e){return e.id!==t})}))}).catch(function(t){e.setState({message:"Poistaminen ep\xe4onnistui. P\xe4ivit\xe4 sivu."})})}},e.state={persons:[],newName:"",newNumber:"",filter:"",message:null},e}return Object(f.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;b.getAll().then(function(t){return e.setState({persons:t})})}},{key:"render",value:function(){var e=this,t=this.state.filter.toLowerCase().trim(),n=t?this.state.persons.filter(function(e){return e.name.toLowerCase().includes(t)}):this.state.persons;return r.a.createElement("div",null,r.a.createElement("h2",null,"Puhelinluettelo"),r.a.createElement(h,{message:this.state.message}),r.a.createElement(p,{onChange:this.handleChangeFilter}),r.a.createElement(v,{app:this}),r.a.createElement("h2",null,"Numerot"),r.a.createElement("table",null,r.a.createElement("tbody",null,n.map(function(t){return r.a.createElement(d,{key:t.name,person:t,app:e})}))))}}]),t}(r.a.Component);n(41);o.a.render(r.a.createElement(N,null),document.getElementById("root"))}},[[17,2,1]]]);
//# sourceMappingURL=main.0efedaee.chunk.js.map